<h1 class="text-center my-4">Todos os Livros</h1>

<!-- Barra de Pesquisa -->
<section class="container mb-4">
  <form class="d-flex" role="search" method="GET" action="/livro">
    <input
      id="searchInput"
      class="form-control me-2"
      type="search"
      placeholder="Pesquisar por nome, autor, g√™nero ou ID"
      aria-label="Pesquisar"
      name="q"
      value="{{q}}"
    />
    <button class="btn btn-outline-primary" type="submit">üîç Buscar</button>
  </form>
</section>

<!-- Lista de Livros -->
<section class="container">
  <div class="row g-4">
    {{#each livro}}
    <div class="col-md-4">
      <a href="/livro/edit/{{this.id}}" class="text-decoration-none text-dark">
        <div class="card h-100 shadow-sm">
          <img
            src="{{this.image}}"
            class="card-img-top"
            alt="{{this.name}}"
            style="object-fit: cover; height: 250px;"
          />
          <div class="card-body">
            <h6 class="text-muted mb-2">
              <span class="badge bg-secondary">ID: {{this.id}}</span>
            </h6>

            <h5 class="card-title">{{this.name}}</h5>
            <p class="card-text"><strong>Autor:</strong> {{this.author}}</p>
            <p class="card-text"><strong>G√™nero:</strong> {{cleanGenres this.genre}}</p>
            <p class="card-text"><strong>Avalia√ß√£o:</strong> {{this.rating}}</p>
            <p class="card-text"><strong>Formato:</strong> {{this.format}}</p>

            {{#unless this.isBorrowed}}
              {{#if this.adress}}
                <p class="card-text"><strong>üìç Endere√ßo:</strong> {{this.adress}}</p>
              {{/if}}
            {{/unless}}

            <p class="card-text">
              <strong>Status:</strong>
              {{#if this.isBorrowed}}
                Emprestado para {{this.borrowedBy}}
              {{else}}
                Dispon√≠vel
              {{/if}}
            </p>
          </div>
        </div>
      </a>
    </div>
    {{/each}}
  </div>
</section>

<script src="/js/search.js"></script>
